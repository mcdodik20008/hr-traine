# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è HR Training Bot

–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç PlantUML –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –æ–±—É—á–µ–Ω–∏—è HR-–∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–æ–≤.

## –î–∏–∞–≥—Ä–∞–º–º—ã

### 1. üìê –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`architecture_design.puml`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π (Telegram Bot, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–º–æ–¥—É–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞, –∏–Ω—Ç–µ—Ä–≤—å—é, —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã)
- –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö (–º–æ–¥–µ–ª–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏)
- –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Gemini API, GigaChat API)

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **–ú–æ–¥—É–ª—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞**: —Å–∏—Å—Ç–µ–º–∞ —à–∞–≥–æ–≤ –æ–±—É—á–µ–Ω–∏—è, –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è Excel
- **–ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä–≤—å—é**: –º–µ–Ω–µ–¥–∂–µ—Ä –∏–Ω—Ç–µ—Ä–≤—å—é, —Å–∏–º—É–ª—è—Ç–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–∞, –¥–µ—Ç–µ–∫—Ç–æ—Ä –ø—Ä–æ—â–∞–Ω–∏—è, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤
- **–ú–æ–¥—É–ª—å —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã**: —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∑–∞–¥–∞–Ω–∏–π —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏
- **LLM –°–µ—Ä–≤–∏—Å**: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞–±–æ—Ç—ã —Å AI (Gemini + GigaChat fallback)

**–¶–≤–µ—Ç–∞:**
- üîµ –°–∏–Ω–∏–π (#E8F4F8) - –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π
- üü° –ñ–µ–ª—Ç—ã–π (#FFF4E6) - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- üü¢ –ó–µ–ª–µ–Ω—ã–π (#E8F5E9) - –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
- üî¥ –ö—Ä–∞—Å–Ω—ã–π (#FFE6E6) - –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### 2. üíª –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (`architecture_implementation.puml`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏.

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –í—Å–µ handlers –∏–∑ `app.bot.handlers/`
- –ö–ª–∞—Å—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (`states.py`)
- Core –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`LLMClient`, `search_map`)
- –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ `app.database.models`
- –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
- Scripts –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ê—Ç—Ä–∏–±—É—Ç—ã –∏ –º–µ—Ç–æ–¥—ã –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
- Enum —Ç–∏–ø—ã (UserRole, StepType)
- –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ (–æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º)
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

## –ö–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: VS Code + PlantUML Extension (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [PlantUML](https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Java (–µ—Å–ª–∏ –Ω–µ—Ç): `winget install Oracle.JDK.17`
3. –û—Ç–∫—Ä–æ–π—Ç–µ `.puml` —Ñ–∞–π–ª
4. –ù–∞–∂–º–∏—Ç–µ `Alt+D` –¥–ª—è preview
5. –ò–ª–∏ –∫–ª–∏–∫ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí "Preview Current Diagram"

### –í–∞—Ä–∏–∞–Ω—Ç 2: Online PlantUML Editor

1. –û—Ç–∫—Ä–æ–π—Ç–µ [PlantUML Web Server](http://www.plantuml.com/plantuml/uml/)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.puml` —Ñ–∞–π–ª–∞
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
4. –î–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 3: CLI (–¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ PNG/SVG)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PlantUML
npm install -g node-plantuml

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ PNG
puml generate –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.puml -o architecture_design.png

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ SVG
puml generate –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.puml -o architecture_design.svg -t svg
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: Docker

```bash
docker run --rm -v ${PWD}:/data plantuml/plantuml –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.puml
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

```
hr-traine/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.py          # –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã (/start, /help)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registration.py    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onboarding.py      # –û–Ω–±–æ—Ä–¥–∏–Ω–≥ (labs module)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interview.py       # –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä–≤—å—é
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ expert.py          # –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ states.py              # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py          # LLM –∫–ª–∏–µ–Ω—Ç (Gemini + GigaChat)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search_map.py          # –í–∞–ª–∏–¥–∞—Ü–∏—è Excel —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.py                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö setup
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seed_labs.py           # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed_candidates.py     # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ alembic/
‚îÇ   ‚îî‚îÄ‚îÄ versions/                  # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ architecture_design.puml        ‚Üê –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ architecture_implementation.puml ‚Üê –î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ README.md                       ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ docker-compose.yml
```

## –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. MVC (Model-View-Controller)
- **Model**: `app.database.models` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- **View**: Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ aiogram
- **Controller**: `app.bot.handlers` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥

### 2. State Pattern
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FSM (Finite State Machine) —á–µ—Ä–µ–∑ `aiogram.fsm`
- –°–æ—Å—Ç–æ—è–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `app.bot.states`
- –†–∞–∑–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

### 3. Strategy Pattern
- `LLMClient` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É Gemini –∏ GigaChat
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### 4. Repository Pattern
- `app.database.base.get_session()` - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- –ú–æ–¥–µ–ª–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É –¥–∞–Ω–Ω—ã—Ö

### 5. Facade Pattern
- `LLMClient` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ LLM API
- –°–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Ç–æ–∫ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
/start ‚Üí common.cmd_start() ‚Üí StateManager ‚Üí registration.process_name() ‚Üí User (DB)
```

### –ü–æ—Ç–æ–∫ 2: –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
```
/onboarding ‚Üí onboarding.cmd_onboarding() ‚Üí
‚Üí OnboardingStep (DB) ‚Üí process_step() ‚Üí
‚Üí TimeTracker + ExcelValidator + LLMClient ‚Üí
‚Üí OnboardingSubmission (DB)
```

### –ü–æ—Ç–æ–∫ 3: –ò–Ω—Ç–µ—Ä–≤—å—é —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º
```
/interview ‚Üí interview.cmd_interview() ‚Üí
‚Üí CandidateProfile (DB) ‚Üí start_interview() ‚Üí
‚Üí process_chat() ‚Üí LLMClient.simulate_candidate() ‚Üí
‚Üí FarewellDetector ‚Üí ReportGenerator ‚Üí
‚Üí InterviewSession (DB)
```

### –ü–æ—Ç–æ–∫ 4: –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
```
/expert ‚Üí expert.cmd_expert() ‚Üí
‚Üí OnboardingSubmission (pending) ‚Üí process_grading() ‚Üí
‚Üí Update Submission (approved/rejected)
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Python 3.11+, asyncio
- **Bot Framework**: aiogram 3.x (Telegram Bot API)
- **Database**: PostgreSQL 15+ —Å pgvector
- **ORM**: SQLAlchemy 2.x (async)
- **Migrations**: Alembic
- **AI/LLM**: Google Gemini API, GigaChat API (fallback)
- **Containerization**: Docker, Docker Compose

## –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

- [ ] Sequence diagram: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∏–Ω—Ç–µ—Ä–≤—å—é
- [ ] Sequence diagram: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å LLM –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [ ] Sequence diagram: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É Gemini –∏ GigaChat

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `.puml` —Ñ–∞–π–ª
2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ PNG/SVG (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ—Ç README, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 19.12.2025  
**–í–µ—Ä—Å–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** 1.0  
**–ê–≤—Ç–æ—Ä:** HR Training Bot Team
